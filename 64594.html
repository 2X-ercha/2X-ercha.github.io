<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>猹的魔改日记-文章页抛弃卡片、丢弃小菜单以及布局重构 | 贰猹の小窝</title><meta name="keywords" content="Diary,Course,hexo,butterfly"><meta name="author" content="noionion"><meta name="copyright" content="noionion"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="魔改第四弹！"><meta property="og:type" content="article"><meta property="og:title" content="猹的魔改日记-文章页抛弃卡片、丢弃小菜单以及布局重构"><meta property="og:url" content="https://noionion.top/64594.html"><meta property="og:site_name" content="贰猹の小窝"><meta property="og:description" content="魔改第四弹！"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://noionion-picture-bed.oss-cn-hangzhou.aliyuncs.com/deemo_for_cover/17.jpg"><meta property="article:published_time" content="2022-12-24T23:00:00.000Z"><meta property="article:modified_time" content="2022-12-24T23:00:00.000Z"><meta property="article:author" content="noionion"><meta property="article:tag" content="Diary"><meta property="article:tag" content="Course"><meta property="article:tag" content="hexo"><meta property="article:tag" content="butterfly"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://noionion-picture-bed.oss-cn-hangzhou.aliyuncs.com/deemo_for_cover/17.jpg"><link rel="shortcut icon" href="https://noionion-picture-bed.oss-cn-hangzhou.aliyuncs.com/img/head.jpg"><link rel="canonical" href="https://noionion.top/64594"><link rel="preconnect" href="//cdn1.tianli0.top"><link rel="preconnect" href="//busuanzi.ibruce.info"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdnjs.sourcegcdn.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" media="print" onload='this.media="all"'><script>const GLOBAL_CONFIG={root:"/",algolia:void 0,localSearch:{path:"search.xml",languages:{hits_empty:"找不到您查询的内容：${query}"}},translate:void 0,noticeOutdate:void 0,highlight:{plugin:"highlighjs",highlightCopy:!0,highlightLang:!0},copy:{success:"复制成功",error:"复制错误",noSupport:"浏览器不支持"},relativeDate:{homepage:!1,post:!1},runtime:"天",date_suffix:{just:"刚刚",min:"分钟前",hour:"小时前",day:"天前",month:"个月前"},copyright:void 0,lightbox:"fancybox",Snackbar:void 0,source:{jQuery:"https://cdnjs.sourcegcdn.com/ajax/libs/jquery/3.6.0/jquery.min.js",justifiedGallery:{js:"https://cdnjs.sourcegcdn.com/ajax/libs/justifiedGallery/3.8.1/js/jquery.justifiedGallery.min.js",css:"https://cdnjs.sourcegcdn.com/ajax/libs/justifiedGallery/3.8.1/css/justifiedGallery.min.css"},fancybox:{js:"https://cdnjs.sourcegcdn.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js",css:"https://cdnjs.sourcegcdn.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css"}},isPhotoFigcaption:!0,islazyload:!1,isanchor:!1}</script><script id="config-diff">var GLOBAL_CONFIG_SITE={isPost:!0,isHome:!1,isHighlightShrink:!1,isToc:!0,postUpdate:"2022-12-24 23:00:00"}</script><noscript><style type="text/css">#nav{opacity:1}.justified-gallery img{opacity:1}#post-meta time,#recent-posts time{display:inline!important}</style></noscript><script>(e=>{e.saveToLocal={set:function(e,t,o){0!==o&&(o=864e5*o,t={value:t,expiry:(new Date).getTime()+o},localStorage.setItem(e,JSON.stringify(t)))},get:function(e){var t=localStorage.getItem(e);if(t){t=JSON.parse(t);if(!((new Date).getTime()>t.expiry))return t.value;localStorage.removeItem(e)}}},e.getScript=a=>new Promise((t,e)=>{const o=document.createElement("script");o.src=a,o.async=!0,o.onerror=e,o.onload=o.onreadystatechange=function(){var e=this.readyState;e&&"loaded"!==e&&"complete"!==e||(o.onload=o.onreadystatechange=null,t())},document.head.appendChild(o)}),e.activateDarkMode=function(){document.documentElement.setAttribute("data-theme","dark"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#0d0d0d")},e.activateLightMode=function(){document.documentElement.setAttribute("data-theme","light"),null!==document.querySelector('meta[name="theme-color"]')&&document.querySelector('meta[name="theme-color"]').setAttribute("content","#ffffff")};e=saveToLocal.get("theme");"dark"===e?activateDarkMode():"light"===e&&activateLightMode()})(window)</script><link rel="stylesheet" href="https://cdn1.tianli0.top/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css"><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-footer-beautify@1.0.0/lib/runtime.css" media="print" onload='this.media="all"'><link rel="stylesheet" href="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.css" media="print" onload='this.media="all"'><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="贰猹の小窝" type="application/atom+xml"><link rel="alternate" href="/rss.xml" title="贰猹の小窝" type="application/rss+xml"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="simply-cha-top"></div><div class="is-center" id="sidebar-avatar"><div class="avatar-img"><img src="https://noionion-picture-bed.oss-cn-hangzhou.aliyuncs.com/img/head.jpg" onerror='this.onerror=null,this.src="/img/friend_404.gif"' alt="avatar"></div><div class="author-info__name">noionion</div><div class="author-info__description">欢迎光临小窝！</div></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">49</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">17</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/2X-ercha"><i class="fab fa-github"></i><span> Follow Me</span></a><div class="menu-info-social-icons is-center"><a class="social-icon" href="https://github.com/2X-ercha" target="_blank" title="Github"><i class="fa-fw fab fa-github"></i></a><a class="social-icon" href="mailto:noionion@outlook.com" target="_blank" title="Email"><i class="fa-fw fas fa-envelope"></i></a><a class="social-icon" href="/rss.xml" target="_blank" title="rss"><i class="fa-fw fas fa-rss"></i></a></div><hr><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-xigua1"></use></svg><span>甜瓜待摘</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child" style="left:-45px"><li><a class="site-page child" href="/tags/Course/"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-jiaocheng"></use></svg><span>教程分享</span></a></li><li><a class="site-page child" href="/tags/Project/"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-xiangmu"></use></svg><span>自制项目</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-miao"></use></svg><span>种瓜日记</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child" style="left:-100px"><li><a class="site-page child" href="/tags/C/"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-colorful-code"></use></svg><span>搓搓C++</span></a></li><li><a class="site-page child" href="/tags/Python/"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-colorful-code"></use></svg><span>玩玩爬虫</span></a></li><li><a class="site-page child" href="/tags/html/"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-colorful-code"></use></svg><span>摸摸前端</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-tea"></use></svg><span>生活日常</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child" style="left:-100px"><li><a class="site-page child" href="/link/"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-pengyou"></use></svg><span>友情链接</span></a></li><li><a class="site-page child" href="/friendcircle/"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-pengyouquanzhushou2x"></use></svg><span>朋友文章</span></a></li><li><a class="site-page child" href="/messageboard/"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shuoshuo-"></use></svg><span>留言信箱</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-liuyan"></use></svg><span>猹的哔哔</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child" style="left:-45px"><li><a class="site-page child" href="/tags/Diary/"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-tubiaozhizuomoban-"></use></svg><span>贰猹随笔</span></a></li><li><a class="site-page child" href="/about/"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-xinfeng"></use></svg><span>猹的自述</span></a></li></ul></div></div><div class="simply-cha"></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/">贰猹の小窝</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-xigua1"></use></svg><span>甜瓜待摘</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child" style="left:-45px"><li><a class="site-page child" href="/tags/Course/"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-jiaocheng"></use></svg><span>教程分享</span></a></li><li><a class="site-page child" href="/tags/Project/"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-xiangmu"></use></svg><span>自制项目</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-miao"></use></svg><span>种瓜日记</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child" style="left:-100px"><li><a class="site-page child" href="/tags/C/"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-colorful-code"></use></svg><span>搓搓C++</span></a></li><li><a class="site-page child" href="/tags/Python/"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-colorful-code"></use></svg><span>玩玩爬虫</span></a></li><li><a class="site-page child" href="/tags/html/"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-colorful-code"></use></svg><span>摸摸前端</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-tea"></use></svg><span>生活日常</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child" style="left:-100px"><li><a class="site-page child" href="/link/"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-pengyou"></use></svg><span>友情链接</span></a></li><li><a class="site-page child" href="/friendcircle/"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-pengyouquanzhushou2x"></use></svg><span>朋友文章</span></a></li><li><a class="site-page child" href="/messageboard/"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shuoshuo-"></use></svg><span>留言信箱</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-liuyan"></use></svg><span>猹的哔哔</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child" style="left:-45px"><li><a class="site-page child" href="/tags/Diary/"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-tubiaozhizuomoban-"></use></svg><span>贰猹随笔</span></a></li><li><a class="site-page child" href="/about/"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-xinfeng"></use></svg><span>猹的自述</span></a></li></ul></div></div></div><div id="navFn"><div id="search-button"><a class="social-icon search"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-sousuo"></use></svg><span>搜索</span></a></div><div id="darkmodeBt"><a class="darkmode switch"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-deng1"></use></svg><span id="darkmode-switch">关灯</span></a></div><div id="toggle-menu"><a class="site-page"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-mulu"></use></svg></a></div></div></div></nav></header><div id="mainbody"><div id="content_leftside"><div id="left_menu"><div class="leftside-social"><a class="social-icon" href="https://github.com/2X-ercha" target="_blank" title="Github"><i class="fa-fw fab fa-github"></i></a><a class="social-icon" href="mailto:noionion@outlook.com" target="_blank" title="Email"><i class="fa-fw fas fa-envelope"></i></a><a class="social-icon" href="/rss.xml" target="_blank" title="rss"><i class="fa-fw fas fa-rss"></i></a></div><div class="leftside-contents"><span id="read-percent">0</span></div><div class="leftside-comment"><a href="#post-comment" title="要去留言吗？"><i class="fa-lg fas fa-comment"></i></a></div><div class="leftside-qq" title="来糖果屋聊天噻！"><i class="fa-lg fas fa-qrcode"></i></div><div class="leftside-rmb"><a title="柿还在施工的捐赠页！不给看！"><i class="fa-lg fas fa-money-check-dollar"></i></a></div></div><div id="left_display"><div class="candy_qrcode"><img src="./img/candy-qr.png"></div></div></div><main class="layout hide-aside" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">猹的魔改日记-文章页抛弃卡片、丢弃小菜单以及布局重构</h1><div id="post-meta"><div class="tag-cloud-list is-center"><a href="/tags/Diary/" style="font-size:1.7em;color:#6f0e56">Diary</a><a href="/tags/Course/" style="font-size:1.8em;color:#2a85b9">Course</a><a href="/tags/hexo/" style="font-size:1.6em;color:#705f62">hexo</a><a href="/tags/butterfly/" style="font-size:1.5em;color:#b63926">butterfly</a></div><div class="meta-firstline"><span class="post-meta-date"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-rili"></use></svg><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-12-24T23:00:00.000Z" title="发表于 2022-12-24 23:00:00">2022-12-24</time><span class="post-meta-separator">|</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-shijian"></use></svg><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-12-24T23:00:00.000Z" title="更新于 2022-12-24 23:00:00">2022-12-24</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><svg class="icon" aria-hidden="true"><use xlink:href="#icon-fenlei1"></use></svg><a class="post-meta-categories" href="/categories/%E9%AD%94%E6%94%B9%E6%97%A5%E8%AE%B0%E6%9C%AC/">魔改日记本</a></span></div><div class="meta-secondline"><span class="post-meta-separator"></span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">4.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>18分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" data-flag-title="猹的魔改日记-文章页抛弃卡片、丢弃小菜单以及布局重构"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div><div class="line"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-xigua2"></use></svg><svg class="icon" aria-hidden="true"><use xlink:href="#icon-xigua2"></use></svg><svg class="icon" aria-hidden="true"><use xlink:href="#icon-xigua2"></use></svg><svg class="icon" aria-hidden="true"><use xlink:href="#icon-xigua2"></use></svg><svg class="icon" aria-hidden="true"><use xlink:href="#icon-xigua2"></use></svg></div></div></div><article class="post-content" id="article-container"><h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><div class="note red icon flat"><i class="note-icon fas fa-fan"></i><p>温馨提示：本日记本只提供魔改参考，并不做通用处理，很多源码修改都需要根据自己博客做小小微调</p></div><div class="note purple icon flat"><i class="note-icon far fa-hand-scissors"></i><p>另外在修改源码时注意做好备份处理。本帖只提供思路与方法，如果哪里炸了，请检查语法与缩进等，猹概不负责啦！</p></div><p>继白嫖<a target="_blank" rel="noopener" href="https://akilar.top/">店长</a>、<a target="_blank" rel="noopener" href="https://zfe.space/">冰老师</a>、<a target="_blank" rel="noopener" href="https://www.antmoe.com/">小康</a>、<a target="_blank" rel="noopener" href="https://www.nesxc.com/">小N</a>等大佬的魔改之后，猹终于不满于白嫖，开始想动手实操，把自己的博客调教成想要的样子，也以此来使猹学前端有实操的机会。</p><p><strong>注</strong>：这部分前言内容会在魔改日记本的每一篇都出现；另外这是一篇日记而非教程，文风可能不是那么友好（逃</p><div class="note red icon flat"><i class="note-icon fas fa-fan"></i><p>本篇特别提示：这次的魔改修改了bf的主要结构，并对一些大的布局样式进行了flex弹性盒子的全面替换，不建议进行跟随魔改（我自己都不记得我改的一些细节）</p></div><hr><h2 id="魔改起因"><a href="#魔改起因" class="headerlink" title="魔改起因"></a>魔改起因</h2><p>事情要从小菜单的魔改说起。猹将文章页的目录模块藏在了小菜单里头，结果经过大量的反馈发现，“猹你博客没有目录吗”</p><p>az，好吧本来是为了保留作者卡片而设计的小菜单，既然目录没人看到，那小菜单显然也是没人点开看。本来的目的也就没有达到，想想还是把小菜单砍了，重构吧……</p><h2 id="主要结构重构-左右双栏与菜单按钮"><a href="#主要结构重构-左右双栏与菜单按钮" class="headerlink" title="主要结构重构-左右双栏与菜单按钮"></a>主要结构重构-左右双栏与菜单按钮</h2><details cyan><summary>设计来源、灵感</summary><div class="content"><p>重构的最主要目的还是原本容易被人忽略的目录模块。找到一个好的目录布局设计可不容易，bf原先的设计也的确不适合我。在<a target="_blank" rel="noopener" href="https://blog.zhheo.com/">zhheo</a>的推荐下，选用了<a target="_blank" rel="noopener" href="https://sspai.com/">少数派</a>的目录设计。</p><p><img src="https://noionion-picture-bed.oss-cn-hangzhou.aliyuncs.com/img/sspai1.jpg"><br><img src="https://noionion-picture-bed.oss-cn-hangzhou.aliyuncs.com/img/sspai2.jpg"></p><p>少数派的设计逻辑说实在很戳我的心，然后我脑子一抽决定给他加个当前标题居中显示。。。再然后折腾了几天就是现在这样了。</p></div></details><details yellow open><summary>设计思路</summary><div class="content"><p>但是折腾这个目录的关键在于，如何保证其自适应良好。采取与小菜单相同的浮动窗口肯定是不好用的，一不小心可能就会变成这个样子<del>（拿同学在做的博客系统举个栗子（反正目录是我的设计））</del></p><p><img src="https://noionion-picture-bed.oss-cn-hangzhou.aliyuncs.com/img/badtoc.png"></p><p>如果要保证文章板块与目录间天然的自适应，最好的方式还是在左右侧各开辟一个 div 盒子，这样更可靠一点。原本 butterfly 主题的源码部分，是这样的：</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;mainbody&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">main</span> <span class="attr">class</span>=<span class="string">&quot;layout hide-aside&quot;</span> <span class="attr">id</span>=<span class="string">&quot;content-inner&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;post&quot;</span>&gt;</span>...<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">main</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>并且对<code>main</code>部分限定了最大宽度<code>1000px</code>，在双栏布局下双栏也被严格限制在这个大小里，属实是对魔改的发挥起到了一定的限制。故而更改其结构是十分必要的事。于是目标结构如下：</p><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">  &lt;div id=&quot;mainbody&quot;&gt;</span><br><span class="line"><span class="addition">+   &lt;div id=&quot;content_leftside&quot;&gt;...&lt;/div&gt;</span></span><br><span class="line">    &lt;main class=&quot;layout hide-aside&quot; id=&quot;content-inner&quot;&gt;</span><br><span class="line">      &lt;div id=&quot;post&quot;&gt;...&lt;/div&gt;</span><br><span class="line">    &lt;/main&gt;</span><br><span class="line"><span class="addition">+   &lt;div id=&quot;content_rightside&quot;&gt;...&lt;/div&gt;</span></span><br><span class="line">  &lt;/div&gt;</span><br></pre></td></tr></table></figure><p>此后，显然就可以直接在新开辟的<code>content_rightside</code>加点料。如果只是建立起类似样式的目录倒是小事，实现当前标题的恒定居中才是复杂的东西。</p><p>最后是一些功能按键。<strong>回到顶部</strong>这个功能显然还是放在类似小彩单的位置合适，样式直接参考<code>fluit</code>主题的按钮即可。而原本的作者卡片我决定提取社交按钮以及一些功能按键，在左侧也形成一个居中对称的设计来进行视觉上的平衡，魔改思路就此完成。</p></div></details><h3 id="布局调整-开辟左右双栏"><a href="#布局调整-开辟左右双栏" class="headerlink" title="布局调整-开辟左右双栏"></a>布局调整-开辟左右双栏</h3><p>将开辟双栏的思路翻译到 pug 源码文件<code>[BlogSource]/themes/butterfly/layout/includes/layout.pug</code></p><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">        #mainbody</span><br><span class="line"><span class="addition">+         block content_leftside</span></span><br><span class="line">          main#content-inner.layout(class=hideAside)</span><br><span class="line">            if body</span><br><span class="line">              div!= body</span><br><span class="line">            else</span><br><span class="line">              block content</span><br><span class="line">              if theme.aside.enable &amp;&amp; page.aside !== false</span><br><span class="line">                include widget/index.pug</span><br><span class="line"><span class="addition">+         block content_rightside</span></span><br></pre></td></tr></table></figure><p>有了左右双栏，目录等的添加就好做了。</p><h3 id="目录1-原生目录js再就业"><a href="#目录1-原生目录js再就业" class="headerlink" title="目录1-原生目录js再就业"></a>目录1-原生目录js再就业</h3><details cyan><summary>content_rightside pug源码</summary><div class="content"><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">block content_rightside</span><br><span class="line">  - let tocNumber = page.toc_number !== undefined ? page.toc_number : theme.toc.number</span><br><span class="line">  <span class="comment">#content_rightside</span></span><br><span class="line">    <span class="comment">#rightside-toc</span></span><br><span class="line">      .toc-box</span><br><span class="line">        <span class="keyword">if</span> (page.encrypt == true)</span><br><span class="line">          .toc-content.toc-div-class(style=&quot;display:none&quot;)!=toc(page.origin, &#123;list_number: tocNumber&#125;)</span><br><span class="line">        <span class="keyword">else</span> </span><br><span class="line">          .toc-content!=toc(page.content, &#123;list_number: tocNumber&#125;)</span><br><span class="line">    <span class="comment">#rightside-button</span></span><br><span class="line">      button<span class="comment">#rightside-go-up(type=&quot;button&quot; title=_p(&quot;rightside.back_to_top&quot;))</span></span><br><span class="line">        i.fas.fa-arrow-up</span><br></pre></td></tr></table></figure><p>为了方便自适应，按键也一并写在<code>content_rightside</code></p></div></details><p>目录板块在小菜单的魔改中就已经写过了，问题在于<code>active</code>状态添加的js失效了。咱本来就不太懂js，自然不愿去再写一份js来对当前标题进行标记。最有可能的方式，自然是对原本的js进行改造再就业。</p><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line">    const tocFn = function () &#123;</span><br><span class="line"><span class="deletion">-     const $cardTocLayout = document.getElementById(&#x27;card-toc&#x27;)</span></span><br><span class="line"><span class="addition">+     const $cardTocLayout = document.getElementById(&#x27;rightside-toc&#x27;)</span></span><br><span class="line">      const $cardToc = $cardTocLayout.getElementsByClassName(&#x27;toc-content&#x27;)[0]</span><br><span class="line">      const $tocLink = $cardToc.querySelectorAll(&#x27;.toc-link&#x27;)</span><br><span class="line">      const $article = document.getElementById(&#x27;article-container&#x27;)</span><br></pre></td></tr></table></figure><p>但修改完对应类等发现，还是没办法令其生效。于是将目光转向了一些配置项中，最终发现是侧栏的关闭导致了js无法生效。修改文件<code>[BlogSource]/themes/butterfly/layout/includes/head/config_site.pug</code></p><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">-   var showToc = is_post() &amp;&amp; theme.aside.enable &amp;&amp; pageToc &amp;&amp; (toc(page.content) !== &#x27;&#x27; || page.encrypt == true )</span></span><br><span class="line"><span class="addition">+   var showToc = is_post() &amp;&amp; pageToc &amp;&amp; (toc(page.content) !== &#x27;&#x27; || page.encrypt == true )</span></span><br></pre></td></tr></table></figure><p><code>active</code>能够正常标记到目录标题中，就可以编写对应的样式。少数派中的胶囊颗粒采用的是在标题前使用<code>div</code>，所有标题也使用<code>div</code>盒子。胶囊与盒子本身不是绝对关联的情况下才有可能做到所有不处于<code>active</code>状态的标题隐藏而胶囊不隐藏的效果。</p><p>butterfly的设计下目录则采用有序表格的方式呈现。这也意味着在不改目录生成源码的情况下，我如果想单纯实现胶囊就只能使用<code>before</code>伪类，也没有办法做到一模一样的显隐逻辑，于是只能自己设计效果了。</p><p>这里不得不吐槽下不同长度胶囊颗粒的css实现（这写的好淦啊）</p><figure class="highlight styl"><table><tr><td class="code"><pre><span class="line">.toc-item</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.5s</span> ease-in-out</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.5</span></span><br><span class="line">  <span class="comment">// 目录缩进结构</span></span><br><span class="line">  &amp;.toc-level-<span class="number">1</span></span><br><span class="line">    &amp;:before</span><br><span class="line">      <span class="attribute">content</span>: <span class="string">&quot; &quot;</span></span><br><span class="line">      <span class="attribute">margin</span>: <span class="number">0.65rem</span> <span class="number">0.4rem</span> <span class="number">0.65rem</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">width</span>: <span class="number">1rem</span></span><br><span class="line">      <span class="attribute">height</span>: <span class="number">0.2rem</span></span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">0.1rem</span></span><br><span class="line">      <span class="attribute">background</span>: <span class="number">#000</span></span><br><span class="line">  &amp;.toc-level-<span class="number">2</span></span><br><span class="line">    &amp;:before</span><br><span class="line">      <span class="attribute">content</span>: <span class="string">&quot; &quot;</span></span><br><span class="line">      <span class="attribute">margin</span>: <span class="number">0.65rem</span> <span class="number">0.7rem</span> <span class="number">0.65rem</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">width</span>: <span class="number">1rem</span></span><br><span class="line">      <span class="attribute">height</span>: <span class="number">0.2rem</span></span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">0.1rem</span></span><br><span class="line">      <span class="attribute">background</span>: <span class="number">#000</span></span><br><span class="line">  &amp;.toc-level-<span class="number">3</span></span><br><span class="line">    &amp;:before</span><br><span class="line">      <span class="attribute">content</span>: <span class="string">&quot; &quot;</span></span><br><span class="line">      <span class="attribute">margin</span>: <span class="number">0.65rem</span> <span class="number">1.2rem</span> <span class="number">0.65rem</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">width</span>: <span class="number">0.8rem</span></span><br><span class="line">      <span class="attribute">height</span>: <span class="number">0.2rem</span></span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">0.1rem</span></span><br><span class="line">      <span class="attribute">background</span>: <span class="number">#000</span></span><br><span class="line">  &amp;.toc-level-<span class="number">4</span></span><br><span class="line">  &amp;.toc-level-<span class="number">5</span></span><br><span class="line">  &amp;.toc-level-<span class="number">6</span></span><br><span class="line">    &amp;:before</span><br><span class="line">      <span class="attribute">content</span>: <span class="string">&quot; &quot;</span></span><br><span class="line">      <span class="attribute">margin</span>: <span class="number">0.65rem</span> <span class="number">1.7rem</span> <span class="number">0.65rem</span> <span class="number">0</span></span><br><span class="line">      <span class="attribute">width</span>: <span class="number">0.6rem</span></span><br><span class="line">      <span class="attribute">height</span>: <span class="number">0.2rem</span></span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">0.1rem</span></span><br><span class="line">      <span class="attribute">background</span>: <span class="number">#000</span></span><br></pre></td></tr></table></figure><h3 id="目录2-当前标题居中轮转"><a href="#目录2-当前标题居中轮转" class="headerlink" title="目录2-当前标题居中轮转"></a>目录2-当前标题居中轮转</h3><p>居中的轮盘设计就类似于一些卡牌决斗盘抽卡，一些动效就很养眼。本来想使用swiper来实现，但我不知道怎么去控制其随着文章进度转换，于是作罢。</p><p>最终选用了十分暴力的 translate 大法，复用目录的标记js部分进行相应的 translate 计算即可动态偏移：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> offset = -currentIndex * <span class="number">1.5</span> + <span class="number">4.25</span></span><br><span class="line">$cardToc.style.translate = <span class="string">&quot;0 &quot;</span> + offset + <span class="string">&quot;rem&quot;</span></span><br></pre></td></tr></table></figure><p>然后css对对应的标题高度进行限制（例如与上面对应的就是一行1.5rem），保证偏移后还是居中就行。</p><p>translate 大法也就有个反人类设计吧，没办法使用滚轮查看目录。</p><h3 id="子菜单-回到顶部"><a href="#子菜单-回到顶部" class="headerlink" title="子菜单-回到顶部"></a>子菜单-回到顶部</h3><p>回到顶部的按钮还是要做一点点调整的，现在的整体设计是向中间集中的，不适合在边角放小彩单。而放到偏靠中间的部分还是需要考虑位置自适应问题。</p><p>fluit主题的回到顶部按钮位置本身是靠js进行控制的。而我这里做了一点点的尝试，直接在<code>content_rightside</code>进行样式测试。</p><p>意外的是，<code>fixed</code>布局似乎不会被<code>flex</code>干扰，默认会靠在边上而不会串成串儿。于是直接采用绝对定位将其钉在了<code>content_rightside</code>的左下角。</p><p>相关的js逻辑直接复用小彩单，在此不提。</p><h3 id="左侧功能区-文章阅读进度与糖果屋二维码"><a href="#左侧功能区-文章阅读进度与糖果屋二维码" class="headerlink" title="左侧功能区-文章阅读进度与糖果屋二维码"></a>左侧功能区-文章阅读进度与糖果屋二维码</h3><details cyan><summary>content_leftside pug源码</summary><div class="content"><figure class="highlight py"><table><tr><td class="code"><pre><span class="line">block content_leftside</span><br><span class="line">  <span class="comment">#content_leftside</span></span><br><span class="line">    <span class="comment">#left_menu</span></span><br><span class="line">      //- 联系方式</span><br><span class="line">      <span class="keyword">if</span>(theme.social)</span><br><span class="line">        .leftside-social</span><br><span class="line">          !=fragment_cache(<span class="string">&#x27;social&#x27;</span>, function()&#123;<span class="keyword">return</span> partial(<span class="string">&#x27;includes/header/social&#x27;</span>)&#125;)</span><br><span class="line">      //- 阅读进度</span><br><span class="line">      .leftside-contents</span><br><span class="line">        span<span class="comment">#read-percent 0</span></span><br><span class="line">      //- 跳转评论</span><br><span class="line">      .leftside-comment</span><br><span class="line">        a(href=<span class="string">&quot;#post-comment&quot;</span> title=<span class="string">&quot;要去留言吗？&quot;</span>)</span><br><span class="line">          i.fa-lg.fas.fa-comment</span><br><span class="line">      .leftside-qq(title=<span class="string">&quot;来糖果屋聊天噻！&quot;</span>)</span><br><span class="line">        i.fa-lg.fas.fa-qrcode</span><br><span class="line">      .leftside-rmb</span><br><span class="line">        a(title=<span class="string">&quot;柿还在施工的捐赠页！不给看！&quot;</span>)</span><br><span class="line">          i.fa-lg.fas.fa-money-check-dollar</span><br><span class="line">    <span class="comment">#left_display</span></span><br><span class="line">      .candy_qrcode</span><br><span class="line">        img(src=<span class="string">&quot;./img/candy-qr.png&quot;</span>)</span><br></pre></td></tr></table></figure></div></details><p>在原先的bf的目录中，有一串数字表示阅读进度（它采用的不是全网页百分比，在我看来逻辑上更合理一点），恰好可以进行复用。在左侧的功能区一群图标中，插入一个数字恰好可以看起来对称些。</p><p>然后是一些功能，分享按钮与跳转评论本身只是链接，赞助二维码还没画好(<del>涩涩嘿嘿涩涩</del>)</p><p><img src="https://noionion-picture-bed.oss-cn-hangzhou.aliyuncs.com/img/balabalasesesese.png"></p><p>所以只有一个糖果屋群聊二维码需要加上。我去使用工具绘制了一下一个相对好看且对称的二维码：</p><p><img src="./img/candy-qr.png"></p><p>然后以类似的方法添加上去。但是这玩意肯定不能常态显示，不然我倒数第二个图标就是摆设了啊。想想我决定动手写一个js。</p><p>本身我是没有js编写经验的（以前反正或抄或改，反正就是没有自己写过），好在写了类似hover的逻辑还算简单：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">&#x27;DOMContentLoaded&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> leftSideMenu = &#123;</span><br><span class="line">        qrcodeHover: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">            <span class="comment">// 按钮获取</span></span><br><span class="line">            <span class="keyword">const</span> left_menu = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;left_menu&#x27;</span>)</span><br><span class="line">            <span class="keyword">if</span>(left_menu)&#123;</span><br><span class="line">                <span class="keyword">const</span> leftside_qq = left_menu.getElementsByClassName(<span class="string">&#x27;leftside-qq&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">                <span class="comment">// 显示区域获取</span></span><br><span class="line">                <span class="keyword">const</span> left_display = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;left_display&#x27;</span>)</span><br><span class="line">                <span class="keyword">const</span> candy_qrcode = left_display.getElementsByClassName(<span class="string">&#x27;candy_qrcode&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">                leftside_qq.addEventListener(<span class="string">&#x27;mouseover&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                    candy_qrcode.style.opacity = <span class="string">&quot;1&quot;</span></span><br><span class="line">                &#125;)</span><br><span class="line">                leftside_qq.addEventListener(<span class="string">&#x27;mouseout&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                    candy_qrcode.style.opacity = <span class="string">&quot;0&quot;</span></span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    leftSideMenu.qrcodeHover();</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="整体显隐逻辑"><a href="#整体显隐逻辑" class="headerlink" title="整体显隐逻辑"></a>整体显隐逻辑</h3><p>左右栏还是需要相应的显示逻辑的。文章处于最顶部时不应该显示左右栏和回到最顶按钮，阅读结束后不应显示左右栏。于是这里选择复用原小菜单显隐逻辑代码，做进一步修改：</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">window</span>.scrollCollect = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> btf.throttle(<span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> currentTop = <span class="built_in">window</span>.scrollY || <span class="built_in">document</span>.documentElement.scrollTop</span><br><span class="line">    <span class="keyword">const</span> isDown = scrollDirection(currentTop)</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//滚动条高度+视窗高度 = 可见区域底部高度</span></span><br><span class="line">    <span class="keyword">const</span> currentBottom = currentTop + <span class="built_in">document</span>.documentElement.clientHeight;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (currentTop &gt; <span class="number">56</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (isDown) &#123;</span><br><span class="line">        <span class="keyword">if</span> ($header.classList.contains(<span class="string">&#x27;nav-visible&#x27;</span>)) $header.classList.remove(<span class="string">&#x27;nav-visible&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> (isChatBtnShow &amp;&amp; isChatShow === <span class="literal">true</span>) &#123;</span><br><span class="line">          chatBtnHide()</span><br><span class="line">          isChatShow = <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!$header.classList.contains(<span class="string">&#x27;nav-visible&#x27;</span>)) $header.classList.add(<span class="string">&#x27;nav-visible&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> (isChatBtnHide &amp;&amp; isChatShow === <span class="literal">false</span>) &#123;</span><br><span class="line">          chatBtnShow()</span><br><span class="line">          isChatShow = <span class="literal">true</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      $header.classList.add(<span class="string">&#x27;nav-fixed&#x27;</span>)</span><br><span class="line">      <span class="comment">// 获取位置监测容器，此处采用文章主体</span></span><br><span class="line">      <span class="keyword">var</span> eventlistner = <span class="built_in">document</span>.getElementById(<span class="string">&#x27;post&#x27;</span>);</span><br><span class="line">      <span class="keyword">if</span>(eventlistner)&#123;</span><br><span class="line">        <span class="keyword">var</span> centerY = eventlistner.offsetTop+eventlistner.offsetHeight;</span><br><span class="line">        <span class="keyword">if</span>(centerY &gt; currentBottom &amp;&amp; currentTop &gt; eventlistner.offsetTop+<span class="built_in">document</span>.getElementById(<span class="string">&#x27;post-info&#x27;</span>).offsetHeight)&#123;</span><br><span class="line">          <span class="keyword">if</span>($rightside_toc) $rightside_toc.style.cssText = <span class="string">&#x27;opacity: 1; pointer-events: all&#x27;</span></span><br><span class="line">          <span class="keyword">if</span>($leftside_menu) $leftside_menu.style.cssText = <span class="string">&#x27;opacity: 1; pointer-events: all&#x27;</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          <span class="keyword">if</span>($rightside_toc) $rightside_toc.style.cssText = <span class="string">&#x27;opacity: 0; pointer-events: none&#x27;</span></span><br><span class="line">          <span class="keyword">if</span>($leftside_menu) $leftside_menu.style.cssText = <span class="string">&#x27;opacity: 0; pointer-events: none&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span>($rightside_button) $rightside_button.style.cssText = <span class="string">&#x27;bottom: 1rem&#x27;</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (currentTop === <span class="number">0</span>) &#123;</span><br><span class="line">        $header.classList.remove(<span class="string">&#x27;nav-fixed&#x27;</span>, <span class="string">&#x27;nav-visible&#x27;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span>($rightside_toc) $rightside_toc.style.cssText = <span class="string">&#x27;opacity: 0; pointer-events: none&#x27;</span></span><br><span class="line">      <span class="keyword">if</span>($leftside_menu) $leftside_menu.style.cssText = <span class="string">&#x27;opacity: 0; pointer-events: none&#x27;</span></span><br><span class="line">      <span class="keyword">if</span>($rightside_button) $rightside_button.style.cssText = <span class="string">&#x27;bottom: -3rem&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.body.scrollHeight &lt;= innerHeight) &#123;</span><br><span class="line">      <span class="keyword">if</span>($rightside_toc) $rightside_toc.style.cssText = <span class="string">&#x27;opacity: 0; pointer-events: none&#x27;</span></span><br><span class="line">      <span class="keyword">if</span>($leftside_menu) $leftside_menu.style.cssText = <span class="string">&#x27;opacity: 0; pointer-events: none&#x27;</span></span><br><span class="line">      <span class="keyword">if</span>($rightside_button) $rightside_button.style.cssText = <span class="string">&#x27;bottom: -3rem&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">200</span>)()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>显示范围这里选择直接检测文章主体。</p><h3 id="css完整代码和gh提交记录"><a href="#css完整代码和gh提交记录" class="headerlink" title="css完整代码和gh提交记录"></a>css完整代码和gh提交记录</h3><details cyan><summary>样式代码</summary><div class="content"><figure class="highlight styl"><table><tr><td class="code"><pre><span class="line">#mainbody</span><br><span class="line">  <span class="attribute">display</span>: flex</span><br><span class="line">  #post</span><br><span class="line">    <span class="attribute">background</span>: none</span><br><span class="line">    <span class="attribute">box-shadow</span>: none</span><br><span class="line">    &amp;:hover</span><br><span class="line">      <span class="attribute">box-shadow</span>: none</span><br><span class="line">  #content_leftside</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">1</span></span><br><span class="line">    <span class="attribute">width</span>: fill-available</span><br><span class="line">    <span class="attribute">width</span>: -webkit-fill-available</span><br><span class="line">    <span class="attribute">display</span>: flex</span><br><span class="line">    <span class="attribute">flex-direction</span>: row-reverse</span><br><span class="line">    #left_menu</span><br><span class="line">      <span class="attribute">top</span>: -<span class="number">1rem</span></span><br><span class="line">      <span class="attribute">opacity</span>: <span class="number">0</span></span><br><span class="line">      <span class="attribute">pointer-events</span>: none</span><br><span class="line">      <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease-in-out</span><br><span class="line">      <span class="attribute">position</span>: fixed</span><br><span class="line">      <span class="attribute">display</span>: flex</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">100%</span></span><br><span class="line">      <span class="attribute">width</span>: <span class="number">1.5rem</span></span><br><span class="line">      <span class="attribute">padding</span>: <span class="number">0.5rem</span></span><br><span class="line">      <span class="attribute">margin</span>: <span class="number">0</span> auto</span><br><span class="line">      <span class="attribute">flex-direction</span>: column</span><br><span class="line">      <span class="attribute">justify-content</span>: center</span><br><span class="line">      <span class="attribute">align-items</span>: center</span><br><span class="line">      translate: -<span class="number">0.7rem</span> <span class="number">0</span></span><br><span class="line">      i</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#000</span></span><br><span class="line">      .leftside-social</span><br><span class="line">        <span class="attribute">text-align</span>: center</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0.7</span></span><br><span class="line">        <span class="attribute">width</span>: <span class="number">1.5rem</span></span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">0.4rem</span></span><br><span class="line">        <span class="attribute">transition</span>: all <span class="number">0.5s</span></span><br><span class="line">        .fa-fw</span><br><span class="line">          <span class="attribute">margin</span>: <span class="number">0.5rem</span> <span class="number">0</span></span><br><span class="line">          <span class="attribute">transition</span>: all <span class="number">0.3s</span></span><br><span class="line">          <span class="attribute">transform</span>: scale(<span class="number">1.3</span>)</span><br><span class="line">        &amp;:hover</span><br><span class="line">          <span class="attribute">opacity</span>: <span class="number">1</span></span><br><span class="line">      .leftside-contents</span><br><span class="line">      .leftside-comment</span><br><span class="line">      .leftside-qq</span><br><span class="line">      .leftside-rmb</span><br><span class="line">        <span class="attribute">text-align</span>: center</span><br><span class="line">        <span class="attribute">margin-bottom</span>: <span class="number">0.25rem</span></span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0.7</span></span><br><span class="line">        <span class="attribute">width</span>: <span class="number">1.5rem</span></span><br><span class="line">        <span class="attribute">height</span>: <span class="number">1.5rem</span></span><br><span class="line">        <span class="attribute">font-weight</span>: bold</span><br><span class="line">        <span class="attribute">transition</span>: all <span class="number">0.5s</span></span><br><span class="line">        a</span><br><span class="line">          <span class="attribute">font-weight</span>: bolder</span><br><span class="line">        .fas</span><br><span class="line">          <span class="attribute">margin</span>: <span class="number">0.5rem</span> <span class="number">0</span></span><br><span class="line">          <span class="attribute">width</span>: <span class="number">1.25em</span></span><br><span class="line">        <span class="selector-class">.fas</span>::hover</span><br><span class="line">          <span class="attribute">transform</span>: scale(<span class="number">1.3</span>)</span><br><span class="line">        &amp;:hover</span><br><span class="line">          <span class="attribute">opacity</span>: <span class="number">1</span></span><br><span class="line">      .leftside-contents</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">1rem</span></span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">#000</span></span><br><span class="line">        <span class="attribute">margin-bottom</span>: <span class="number">0.5rem</span></span><br><span class="line">    #left_display</span><br><span class="line">      <span class="comment">// box-shadow: 0 0 5px #000</span></span><br><span class="line">      <span class="attribute">width</span>: inherit</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">100%</span></span><br><span class="line">      <span class="attribute">margin-right</span>: <span class="number">3rem</span></span><br><span class="line">      <span class="attribute">display</span>: flex</span><br><span class="line">      <span class="attribute">align-items</span>: center</span><br><span class="line">      <span class="attribute">position</span>: fixed</span><br><span class="line">      <span class="attribute">top</span>: -<span class="number">0.62rem</span></span><br><span class="line">      <span class="attribute">flex-direction</span>: row-reverse</span><br><span class="line">      .candy_qrcode</span><br><span class="line">        <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease-in-out</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span></span><br><span class="line">        <span class="attribute">pointer-events</span>: none</span><br><span class="line">        <span class="attribute">max-width</span>: <span class="number">9rem</span></span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  #content_rightside</span><br><span class="line">    <span class="attribute">flex</span>: <span class="number">1</span></span><br><span class="line">    <span class="attribute">width</span>: fill-available</span><br><span class="line">    <span class="attribute">width</span>: -webkit-fill-available</span><br><span class="line">    <span class="attribute">display</span>: flex</span><br><span class="line">    <span class="attribute">flex-direction</span>: row</span><br><span class="line">    #rightside-toc</span><br><span class="line">      <span class="attribute">top</span>: -<span class="number">1rem</span></span><br><span class="line">      <span class="attribute">opacity</span>: <span class="number">0</span></span><br><span class="line">      <span class="attribute">pointer-events</span>: none</span><br><span class="line">      <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease-in-out</span><br><span class="line">      <span class="attribute">position</span>: fixed</span><br><span class="line">      <span class="attribute">display</span>: flex</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">100%</span></span><br><span class="line">      <span class="attribute">width</span>: inherit</span><br><span class="line">      <span class="attribute">padding</span>: <span class="number">0.5rem</span></span><br><span class="line">      <span class="attribute">flex-direction</span>: row</span><br><span class="line">      <span class="attribute">align-items</span>: center</span><br><span class="line"></span><br><span class="line">      .item-headline</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">1rem</span></span><br><span class="line">        <span class="attribute">font-weight</span>: bold</span><br><span class="line">        <span class="attribute">display</span>: flex</span><br><span class="line">        <span class="attribute">flex-direction</span>: column</span><br><span class="line">        span</span><br><span class="line">          <span class="attribute">margin-left</span>: <span class="number">0.5rem</span></span><br><span class="line">      <span class="selector-tag">span</span>.toc-text</span><br><span class="line">        <span class="attribute">color</span>: <span class="number">#000</span></span><br><span class="line">      .toc-box</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">10rem</span></span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">        <span class="comment">// box-shadow: 0 0 5px #000</span></span><br><span class="line">        <span class="attribute">overflow</span>: hidden</span><br><span class="line">      .toc-<span class="attribute">content</span></span><br><span class="line">        translate: <span class="number">0</span> <span class="number">4.25rem</span></span><br><span class="line">        <span class="attribute">transition</span>: all <span class="number">0.5s</span></span><br><span class="line">        <span class="comment">// height: 100%</span></span><br><span class="line">      ol</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">0</span></span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">0</span>        </span><br><span class="line">        <span class="attribute">list-style-type</span>: none</span><br><span class="line">      <span class="selector-tag">li</span>::marker</span><br><span class="line">        <span class="attribute">content</span>: none</span><br><span class="line">      <span class="selector-tag">li</span>::before</span><br><span class="line">        <span class="attribute">float</span>: left</span><br><span class="line">        <span class="comment">// counter-increment: section</span></span><br><span class="line">        <span class="comment">// content: counters(section,&quot;.&quot;) &quot; &quot;</span></span><br><span class="line">      .toc</span><br><span class="line">        <span class="attribute">font-weight</span>: bold</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">100%</span></span><br><span class="line">        <span class="attribute">height</span>: inherit</span><br><span class="line">        <span class="attribute">overflow-y</span>: scroll</span><br><span class="line">        <span class="attribute">overflow-x</span>: hidden</span><br><span class="line">        <span class="comment">// height: 10rem</span></span><br><span class="line">        <span class="attribute">margin-top</span>: <span class="number">0.1rem</span></span><br><span class="line">        <span class="comment">// padding-left: 0</span></span><br><span class="line">        <span class="attribute">list-style-type</span>: none</span><br><span class="line">        .toc-child</span><br><span class="line">          <span class="comment">// padding: 0</span></span><br><span class="line">          <span class="attribute">list-style-type</span>: none</span><br><span class="line">      <span class="selector-class">.toc</span>::-webkit-scrollbar</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">0</span> <span class="meta">!important</span></span><br><span class="line">      .toc-link</span><br><span class="line">        <span class="attribute">line-height</span>: <span class="number">1.5rem</span></span><br><span class="line">        <span class="attribute">max-height</span>: <span class="number">1.5rem</span></span><br><span class="line">        <span class="attribute">white-space</span>: nowrap</span><br><span class="line">        <span class="attribute">display</span>: block</span><br><span class="line">        <span class="comment">// border-left: 0.1rem solid transparent</span></span><br><span class="line">        <span class="attribute">color</span>: var(--btn-bg)</span><br><span class="line">        <span class="attribute">transition</span>: all <span class="number">0.5s</span></span><br><span class="line">        <span class="attribute">padding-left</span>: <span class="number">0.5rem</span></span><br><span class="line">        <span class="selector-tag">span</span>.toc-text</span><br><span class="line">          <span class="attribute">text-overflow</span>: ellipsis</span><br><span class="line">          <span class="attribute">color</span>: <span class="number">#000</span></span><br><span class="line">        <span class="selector-pseudo">&amp;:hover</span> <span class="selector-tag">span</span>.toc-text</span><br><span class="line">          <span class="attribute">color</span>: <span class="number">#000</span></span><br><span class="line">        &amp;.active</span><br><span class="line">          <span class="attribute">transform</span>: scale(<span class="number">1.3</span>)</span><br><span class="line">          <span class="attribute">transform-origin</span>: <span class="number">2.5rem</span> <span class="number">0.75rem</span></span><br><span class="line">          <span class="attribute">font-weight</span>: bolder</span><br><span class="line">      .toc-item</span><br><span class="line">        <span class="attribute">transition</span>: all <span class="number">0.5s</span> ease-in-out</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0.5</span></span><br><span class="line">        <span class="comment">// 目录缩进结构</span></span><br><span class="line">        &amp;.toc-level-<span class="number">1</span></span><br><span class="line">          &amp;:before</span><br><span class="line">            <span class="attribute">content</span>: <span class="string">&quot; &quot;</span></span><br><span class="line">            <span class="attribute">margin</span>: <span class="number">0.65rem</span> <span class="number">0.4rem</span> <span class="number">0.65rem</span> <span class="number">0</span></span><br><span class="line">            <span class="attribute">width</span>: <span class="number">1rem</span></span><br><span class="line">            <span class="attribute">height</span>: <span class="number">0.2rem</span></span><br><span class="line">            <span class="attribute">border-radius</span>: <span class="number">0.1rem</span></span><br><span class="line">            <span class="attribute">background</span>: <span class="number">#000</span></span><br><span class="line">        &amp;.toc-level-<span class="number">2</span></span><br><span class="line">          &amp;:before</span><br><span class="line">            <span class="attribute">content</span>: <span class="string">&quot; &quot;</span></span><br><span class="line">            <span class="attribute">margin</span>: <span class="number">0.65rem</span> <span class="number">0.7rem</span> <span class="number">0.65rem</span> <span class="number">0</span></span><br><span class="line">            <span class="attribute">width</span>: <span class="number">1rem</span></span><br><span class="line">            <span class="attribute">height</span>: <span class="number">0.2rem</span></span><br><span class="line">            <span class="attribute">border-radius</span>: <span class="number">0.1rem</span></span><br><span class="line">            <span class="attribute">background</span>: <span class="number">#000</span></span><br><span class="line">        &amp;.toc-level-<span class="number">3</span></span><br><span class="line">          &amp;:before</span><br><span class="line">            <span class="attribute">content</span>: <span class="string">&quot; &quot;</span></span><br><span class="line">            <span class="attribute">margin</span>: <span class="number">0.65rem</span> <span class="number">1.2rem</span> <span class="number">0.65rem</span> <span class="number">0</span></span><br><span class="line">            <span class="attribute">width</span>: <span class="number">0.8rem</span></span><br><span class="line">            <span class="attribute">height</span>: <span class="number">0.2rem</span></span><br><span class="line">            <span class="attribute">border-radius</span>: <span class="number">0.1rem</span></span><br><span class="line">            <span class="attribute">background</span>: <span class="number">#000</span></span><br><span class="line">        &amp;.toc-level-<span class="number">4</span></span><br><span class="line">        &amp;.toc-level-<span class="number">5</span></span><br><span class="line">        &amp;.toc-level-<span class="number">6</span></span><br><span class="line">          &amp;:before</span><br><span class="line">            <span class="attribute">content</span>: <span class="string">&quot; &quot;</span></span><br><span class="line">            <span class="attribute">margin</span>: <span class="number">0.65rem</span> <span class="number">1.7rem</span> <span class="number">0.65rem</span> <span class="number">0</span></span><br><span class="line">            <span class="attribute">width</span>: <span class="number">0.6rem</span></span><br><span class="line">            <span class="attribute">height</span>: <span class="number">0.2rem</span></span><br><span class="line">            <span class="attribute">border-radius</span>: <span class="number">0.1rem</span></span><br><span class="line">            <span class="attribute">background</span>: <span class="number">#000</span></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">        &amp;.active</span><br><span class="line">          <span class="attribute">transition</span>: all <span class="number">0.5s</span> ease-in-out</span><br><span class="line">          <span class="attribute">opacity</span>: <span class="number">1</span></span><br><span class="line">          .toc-child</span><br><span class="line">            <span class="attribute">display</span>: block</span><br><span class="line">        &amp;:hover</span><br><span class="line">          <span class="attribute">opacity</span>: <span class="number">1</span></span><br><span class="line">    #rightside-button</span><br><span class="line">      <span class="attribute">position</span>: fixed</span><br><span class="line">      <span class="attribute">z-index</span>: <span class="number">101</span></span><br><span class="line">      <span class="attribute">display</span>: flex</span><br><span class="line">      <span class="attribute">bottom</span>: -<span class="number">3rem</span></span><br><span class="line">      <span class="attribute">align-items</span>: center</span><br><span class="line">      <span class="attribute">justify-content</span>: center</span><br><span class="line">      <span class="attribute">flex-direction</span>: column</span><br><span class="line">      transition: all .5s</span><br><span class="line"></span><br><span class="line">      button</span><br><span class="line">        <span class="attribute">background</span>: var(--card-bg)</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">2rem</span></span><br><span class="line">        <span class="attribute">width</span>: <span class="number">2rem</span></span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">1rem</span></span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">0.8rem</span></span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">#000</span></span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">0.25rem</span> <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=<span class="string">&quot;dark&quot;</span>]</span></span><br><span class="line">  #mainbody</span><br><span class="line">    #content_leftside</span><br><span class="line">      a</span><br><span class="line">        &amp;:hover</span><br><span class="line">          <span class="attribute">color</span>: <span class="number">#a153ff</span></span><br><span class="line">      #left_menu</span><br><span class="line">        .leftside-contents</span><br><span class="line">          <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">#fff</span></span><br><span class="line">        i</span><br><span class="line">          <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line">        <span class="selector-class">.leftside-contents</span> span</span><br><span class="line">          <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line">      #left_display</span><br><span class="line">        .candy_qrcode</span><br><span class="line">          <span class="attribute">filter</span>: invert(<span class="number">1</span>)</span><br><span class="line">    #content_rightside</span><br><span class="line">      #rightside-toc</span><br><span class="line">        <span class="selector-tag">span</span>.toc-text</span><br><span class="line">          <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line">        .toc-link</span><br><span class="line">          <span class="attribute">color</span>: var(--btn-bg)</span><br><span class="line">          <span class="selector-tag">span</span>.toc-text</span><br><span class="line">            <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line">          <span class="selector-pseudo">&amp;:hover</span> <span class="selector-tag">span</span>.toc-text</span><br><span class="line">            <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line">        .toc-item</span><br><span class="line">          <span class="comment">// 目录缩进结构</span></span><br><span class="line">          &amp;.toc-level-<span class="number">1</span></span><br><span class="line">            &amp;:before</span><br><span class="line">              <span class="attribute">background</span>: <span class="number">#fff</span></span><br><span class="line">          &amp;.toc-level-<span class="number">2</span></span><br><span class="line">            &amp;:before</span><br><span class="line">              <span class="attribute">background</span>: <span class="number">#fff</span></span><br><span class="line">          &amp;.toc-level-<span class="number">3</span></span><br><span class="line">            &amp;:before</span><br><span class="line">              <span class="attribute">background</span>: <span class="number">#fff</span></span><br><span class="line">          &amp;.toc-level-<span class="number">4</span></span><br><span class="line">          &amp;.toc-level-<span class="number">5</span></span><br><span class="line">          &amp;.toc-level-<span class="number">6</span></span><br><span class="line">            &amp;:before</span><br><span class="line">              <span class="attribute">background</span>: <span class="number">#fff</span></span><br><span class="line"></span><br><span class="line">      #rightside-button</span><br><span class="line">        button</span><br><span class="line">          <span class="attribute">background</span>: var(--card-bg)</span><br><span class="line">          <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">#fff</span></span><br><span class="line">          i</span><br><span class="line">            <span class="attribute">color</span>: <span class="number">#fff</span></span><br><span class="line"></span><br><span class="line">.start</span><br><span class="line"><span class="selector-class">.end</span> </span><br><span class="line">  <span class="attribute">font-family</span>: <span class="string">&#x27;Noto Serif SC&#x27;</span>, -apple-system, BlinkMacSystemFont, Roboto, Segoe UI, Helvetica, Arial, serif</span><br><span class="line">  <span class="attribute">font-size</span>: large</span><br><span class="line">  <span class="attribute">font-weight</span>: bolder</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.5</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">1200px</span>)</span><br><span class="line">  #content_leftside</span><br><span class="line">    #left_menu</span><br><span class="line">      display: none !important</span><br><span class="line">  #content_rightside</span><br><span class="line">    #rightside-toc</span><br><span class="line">      display: none !important</span><br><span class="line"></span><br><span class="line">@media screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">1100px</span>)</span><br><span class="line">  #mainbody</span><br><span class="line">    display: block</span><br><span class="line">    #content_leftside</span><br><span class="line">      display: none !important</span><br><span class="line">    #content_rightside</span><br><span class="line">      display: none !important</span><br></pre></td></tr></table></figure></div></details><details yellow open><summary>github提交记录</summary><div class="content"><ul><li><strong>[主要]</strong><a target="_blank" rel="noopener" href="https://github.com/2X-ercha/2X-ercha.github.io/commit/03e1345c4e5778e7b6b42232ac0897a689568497">大剂量修改：重构目录结构、文章页，右下角子菜单（移动端未写）</a></li><li><a target="_blank" rel="noopener" href="https://github.com/2X-ercha/2X-ercha.github.io/commit/5408f7cae40881670ae1b0e19262f5b9cf190609">主页bug修复</a></li><li><a target="_blank" rel="noopener" href="https://github.com/2X-ercha/2X-ercha.github.io/commit/6a86ef13f59e6da36747cb747dda3020d51c8242">小屏幕适配</a></li><li><a target="_blank" rel="noopener" href="https://github.com/2X-ercha/2X-ercha.github.io/commit/278d4bd74e80e32a7b40e2bf64c4f3a6bd462ba9">右侧动画微调</a></li><li><strong>[主要]</strong><a target="_blank" rel="noopener" href="https://github.com/2X-ercha/2X-ercha.github.io/commit/f7051c18e41d46f0d4ff4da275fdd792618f49f9">样式去除卡片并微调</a></li><li><a target="_blank" rel="noopener" href="https://github.com/2X-ercha/2X-ercha.github.io/commit/4422c329b699f2b9056842408d8c481a3ba3b418">二维码（未写显隐逻辑）</a></li><li><a target="_blank" rel="noopener" href="https://github.com/2X-ercha/2X-ercha.github.io/commit/ff825f914f5aa7d73cf159a8c5bd3cd6728b7c59">二维码魔改完成</a></li></ul></div></details><h2 id="微调-抛弃卡片结构和若干功能区"><a href="#微调-抛弃卡片结构和若干功能区" class="headerlink" title="微调-抛弃卡片结构和若干功能区"></a>微调-抛弃卡片结构和若干功能区</h2><p>这部分包含了我很长时间的微调和想法，主要只针对整个文章块。</p><p>一是开头的标题部分：</p><p><img src="https://noionion-picture-bed.oss-cn-hangzhou.aliyuncs.com/img/lenovo20221224220458.png"></p><p>我添加了彩色标签，并把一些数据做了重新排版。<del>（西瓜做分割线真好用）</del></p><p>二是地下文章结束的部分：</p><p><img src="https://noionion-picture-bed.oss-cn-hangzhou.aliyuncs.com/img/lenovo20221224220827.png"></p><p>我去除了版权卡片（以后大概还会想个设计补上）、上下篇和推荐（我觉得这玩意属实没什么用处，尽管我做了美化但也觉得很违和）</p><p>三是去除了文章板块的框框，整个与背景项贴合。整体看起来相对简单整洁一点。</p><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>整个文章页魔改应该会告一段落。还剩下的一点坑是移动端的目录和回到顶部，这部分想还是用最传统的浮动小菜单来实现，就不瞎整了。</p><p>这部分的魔改太难以像前面的捋思路方式给源码修改参考，涉及的调整部分过多也不利于做教程。所以有能力的还是建议自己翻我博客源码来做更改，没能力的就爱莫能助了。</p></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Diary/">Diary</a><a class="post-meta__tags" href="/tags/Course/">Course</a><a class="post-meta__tags" href="/tags/hexo/">hexo</a><a class="post-meta__tags" href="/tags/butterfly/">butterfly</a></div><div class="post_share"><div class="social-share" data-image="https://noionion-picture-bed.oss-cn-hangzhou.aliyuncs.com/deemo_for_cover/17.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdnjs.sourcegcdn.com/ajax/libs/social-share.js/1.0.16/css/share.min.css" media="print" onload='this.media="all"'><script src="https://cdnjs.sourcegcdn.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js" defer></script></div></div><div class="end is-center">end</div><div class="line is-center"><svg class="icon" aria-hidden="true"><use xlink:href="#icon-xigua2"></use></svg><svg class="icon" aria-hidden="true"><use xlink:href="#icon-xigua2"></use></svg><svg class="icon" aria-hidden="true"><use xlink:href="#icon-xigua2"></use></svg><svg class="icon" aria-hidden="true"><use xlink:href="#icon-xigua2"></use></svg><svg class="icon" aria-hidden="true"><use xlink:href="#icon-xigua2"></use></svg></div><div id="post-comment"><div class="comment-head is-center"><div class="comment-headline"><span>欢迎留言</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div></main><div id="content_rightside"><div id="rightside-toc"><div class="toc-box"><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%AD%94%E6%94%B9%E8%B5%B7%E5%9B%A0"><span class="toc-text">魔改起因</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BB%E8%A6%81%E7%BB%93%E6%9E%84%E9%87%8D%E6%9E%84-%E5%B7%A6%E5%8F%B3%E5%8F%8C%E6%A0%8F%E4%B8%8E%E8%8F%9C%E5%8D%95%E6%8C%89%E9%92%AE"><span class="toc-text">主要结构重构-左右双栏与菜单按钮</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E5%B1%80%E8%B0%83%E6%95%B4-%E5%BC%80%E8%BE%9F%E5%B7%A6%E5%8F%B3%E5%8F%8C%E6%A0%8F"><span class="toc-text">布局调整-开辟左右双栏</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E5%BD%951-%E5%8E%9F%E7%94%9F%E7%9B%AE%E5%BD%95js%E5%86%8D%E5%B0%B1%E4%B8%9A"><span class="toc-text">目录1-原生目录js再就业</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%AE%E5%BD%952-%E5%BD%93%E5%89%8D%E6%A0%87%E9%A2%98%E5%B1%85%E4%B8%AD%E8%BD%AE%E8%BD%AC"><span class="toc-text">目录2-当前标题居中轮转</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%90%E8%8F%9C%E5%8D%95-%E5%9B%9E%E5%88%B0%E9%A1%B6%E9%83%A8"><span class="toc-text">子菜单-回到顶部</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A6%E4%BE%A7%E5%8A%9F%E8%83%BD%E5%8C%BA-%E6%96%87%E7%AB%A0%E9%98%85%E8%AF%BB%E8%BF%9B%E5%BA%A6%E4%B8%8E%E7%B3%96%E6%9E%9C%E5%B1%8B%E4%BA%8C%E7%BB%B4%E7%A0%81"><span class="toc-text">左侧功能区-文章阅读进度与糖果屋二维码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B4%E4%BD%93%E6%98%BE%E9%9A%90%E9%80%BB%E8%BE%91"><span class="toc-text">整体显隐逻辑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#css%E5%AE%8C%E6%95%B4%E4%BB%A3%E7%A0%81%E5%92%8Cgh%E6%8F%90%E4%BA%A4%E8%AE%B0%E5%BD%95"><span class="toc-text">css完整代码和gh提交记录</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AE%E8%B0%83-%E6%8A%9B%E5%BC%83%E5%8D%A1%E7%89%87%E7%BB%93%E6%9E%84%E5%92%8C%E8%8B%A5%E5%B9%B2%E5%8A%9F%E8%83%BD%E5%8C%BA"><span class="toc-text">微调-抛弃卡片结构和若干功能区</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%93%E8%AF%AD"><span class="toc-text">结语</span></a></li></ol></div></div></div><div id="rightside-button"><button id="rightside-go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div></div><footer id="footer"><div class="wordcount"><span>猹居然写了 187k 字</span><br><span>好像写完一本 沈从文 的 《边城》 了啊</span></div><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span style="padding:.4rem">hexo</span></a><a><i class="fas fa-heart"></i></a><a href="https://butterfly.js.org/" target="_blank" rel="nofollow noopener"><span style="padding:.4rem">butterfly</span></a><div style="font-size:.7rem"><span id="timeDate">载入天数...</span><span> </span><span id="times">载入时分秒...</span><script src="/js/add/duration.js"></script></div></div><div class="statistics"><span id="site_uv">有 <span id="busuanzi_value_site_uv"></span><span> 人光顾过猹的小窝</span></span><span id="site_pv"><span>共 </span><span id="busuanzi_value_site_pv"></span><span> 次在这里摘了个瓜</span></span></div></footer></div><div id="rightside"></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"></div></div></div><hr><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(()=>{const t=document.getElementById("twikoo-count"),n=()=>{let o={el:"#twikoo-wrap",envId:"https://blog-twikoo.noionion.top",region:""};twikoo.init(o)},e=()=>{twikoo.getCommentsCount({envId:"https://blog-twikoo.noionion.top",region:"",urls:[window.location.pathname],includeReply:!1}).then(function(o){t.innerText=o[0].count}).catch(function(o){console.error(o)})},o=(o=!1)=>{"object"==typeof twikoo?(n(),o&&t&&setTimeout(e,0)):getScript("https://cdnjs.sourcegcdn.com/ajax/libs/twikoo/1.6.7/twikoo.all.min.js").then(()=>{n(),o&&t&&setTimeout(e,0)})};btf.loadComment(document.getElementById("twikoo-wrap"),o)})()</script></div><script async src="//at.alicdn.com/t/font_2749059_1lswi5j6yqg.js"></script><script src="/js/add/nav.js"></script><script src="/js/add/leftsidemenu.js"></script><script src="https://cdn1.tianli0.top/npm/butterfly-extsrc@1/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful=!0,POWERMODE.shake=!1,POWERMODE.mobile=!1,document.body.addEventListener("input",POWERMODE)</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script data-pjax>function butterfly_footer_beautify_injector_config(){var e=document.getElementById("footer-wrap");console.log("已挂载butterfly_footer_beautify"),e.insertAdjacentHTML("beforeend",'<div id="ghbdages" style="overflow:hidden;max-height:180px;height:auto;text-align:center;margin-top:10px"><div class="swiper-wrapper"><div class="swiper-slide"><a class="github-badge" target="_blank" href="https://hexo.io/" style="margin-inline:5px" title="博客框架为Hexo_v5.3.0"><img src="https://img.shields.io/badge/Frame-Hexo-blue?style=flat&amp;logo=hexo" alt=""/></a><a class="github-badge" target="_blank" href="https://butterfly.js.org/" style="margin-inline:5px" title="主题版本Butterfly_v3.7.0-b2"><img src="https://img.shields.io/badge/Theme-Butterfly-6513df?style=flat&amp;logo=bitdefender" alt=""/></a><a class="github-badge" target="_blank" href="https://www.sourcegcdn.com/" style="margin-inline:5px" title="本站使用Source Global CDN为部分静态资源提供CDN加速"><img src="https://img.shields.io/badge/CDN-sourcegcdn-orange?style=flat&amp;logo=Apache%20RocketMQ" alt=""/></a><a class="github-badge" target="_blank" href="https://www.jsdelivr.com/" style="margin-inline:5px" title="本站使用JsDelivr仅用于访问部分静态资源"><img src="https://img.shields.io/badge/CDN-jsDelivr-orange?style=flat&amp;logo=jsDelivr" alt=""/></a><a class="github-badge" target="_blank" href="https://github.com/" style="margin-inline:5px" title="本站项目由Github托管"><img src="https://img.shields.io/badge/Source-Github-d021d6?style=flat&amp;logo=GitHub" alt=""/></a><a class="github-badge" target="_blank" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" style="margin-inline:5px" title="本站采用知识共享署名-非商业性使用-相同方式共享4.0国际许可协议进行许可"><img src="https://img.shields.io/badge/Copyright-BY--NC--SA%204.0-d42328?style=flat&amp;logo=Claris" alt=""/></a></div></div></div><style>a.github-badge:hover:before {display:none}</style>')}for(var elist="null".split(","),cpage=location.pathname,epage="all",flag=0,i=0;i<elist.length;i++)cpage.includes(elist[i])&&flag++;("all"===epage&&0==flag||epage===cpage)&&butterfly_footer_beautify_injector_config()</script><script defer src="https://npm.elemecdn.com/hexo-butterfly-swiper/lib/swiper.min.js"></script><script defer data-pjax src="https://npm.elemecdn.com/hexo-butterfly-footer-beautify/lib/swiperbdage_init_js.min.js"></script></body></html>